(function(t){function e(e){for(var i,r,s=e[0],c=e[1],l=e[2],p=0,d=[];p<s.length;p++)r=s[p],a[r]&&d.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},o=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("64a9"),a=n.n(i);a.a},5107:function(t,e,n){"use strict";var i=n("d60d"),a=n.n(i);a.a},5490:function(t,e,n){"use strict";var i=n("bdf3"),a=n.n(i);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{column:t.loading},attrs:{id:"app"}},[t.loading?n("Loader",{attrs:{color:"#004e70",size:40}}):n("Map",{attrs:{center:[4.60971,-74.08175],points:t.points,values:t.values,tile:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"}})],1)},o=[],r=(n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",class:{active:t.organizations.length},attrs:{id:"map"}},[n("div",{class:["aside",{active:t.organizations.length}]},[n("div",{class:["aside__header line v-centered justify-between",{small:t.selected}],on:{click:t.goBack}},[n("h3",{staticClass:"aside__title"},[t._v("\n        "+t._s(t.selected?"← "+t.city:t.city)+"\n      ")]),n("div",{staticClass:"close",on:{click:t.close}})]),n("div",{staticClass:"aside__content"},[n(t.view,{tag:"component",attrs:{organizations:t.organizations,onclick:t.selectOrganization,organization:t.selected}})],1)]),n("div",{ref:"map"})])}),s=[],c=n("3835"),l=(n("c5f6"),n("6cc5"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"organizations"},t._l(t.organizations,function(e,i){return n("div",{key:i,staticClass:"organization",on:{click:function(n){t.onclick(e)}}},[n("p",{staticClass:"organization__name"},[t._v(t._s(e.name))])])}))}),u=[],p={name:"Organizations",props:{organizations:{type:Array,required:!0},onclick:{type:Function,default:function(){}}}},d=p,f=(n("86fe"),n("2877")),v=Object(f["a"])(d,l,u,!1,null,"1eeed296",null);v.options.__file="Organizations.vue";var g=v.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"organization"},[n("h3",{staticClass:"organization__name column"},[t._v(t._s(t.organization.name))]),n("p",{staticClass:"organization__type"},[t._v(t._s(t.organization.type))]),n("p",{staticClass:"organization__influence-level"},[t._v("Influencia "+t._s(t.organization.influence_level.toLowerCase()))]),n("p",{staticClass:"organization__description"},[t._v(t._s(t.organization.description))]),t.organization.contact_name?n("div",{staticClass:"contact__field"},[n("p",{staticClass:"contact__header"},[t._v("Nombre de contacto")]),n("p",{staticClass:"contact__value"},[t._v(t._s(t.organization.contact_name))])]):t._e(),t.organization.website?n("div",{staticClass:"contact__field"},[n("p",{staticClass:"contact__header"},[t._v("Sitio web")]),n("p",{staticClass:"contact__value"},[n("a",{attrs:{href:t.organization.website,target:"_blank"}},[t._v(t._s(t.organization.website)+" "),n("i",{staticClass:"fa fa-external-link"})])])]):t._e()])},_=[],m={name:"Organization",props:{organization:{type:Object,required:!0}}},y=m,b=(n("d9c4"),Object(f["a"])(y,h,_,!1,null,"68ade0b6",null));b.options.__file="Organization.vue";var z=b.exports,O=n("e11e"),C=n.n(O),w={name:"Map",components:{Organizations:g,Organization:z},props:{tile:{type:String,required:!0},center:{type:Array,required:!0},minZoom:{type:Number,default:3},maxZoom:{type:Number,default:7},points:{required:!0,type:Array},values:{required:!0,type:Array}},data:function(){return{map:void 0,group:void 0,city:void 0,country:void 0,selected:void 0,organizations:[],styles:{global:{color:"#66bb6a",fillColor:"#004e70",fillOpacity:.5,opacity:.5,radius:65e3,weight:1},active:{fillOpacity:.9,opacity:.9}}}},computed:{view:function(){return this.selected?z:g}},mounted:function(){this.initializeMap()},methods:{initializeMap:function(){var t=this;this.map=C.a.map(this.$refs.map,{center:this.center,zoom:this.minZoom,minZoom:this.minZoom,maxZoom:this.maxZoom}),C.a.tileLayer(this.tile).addTo(this.map),this.group=C.a.featureGroup(),this.points.map(function(e){var n=Object(c["a"])(e,4),i=n[0],a=n[1],o=n[2],r=n[3];if(o){var s=C.a.circle([o,r],t.styles.global).bindTooltip("".concat(i,", ").concat(a),{direction:"top"});s.on("click",t.handleClickOnLayer),t.group.addLayer(s)}}),this.group.addTo(this.map)},handleClickOnLayer:function(t){var e=t.target,n=e.getLatLng(),i=n.lat,a=n.lng;this.group.setStyle(this.styles.global),e.setStyle(this.styles.active),this.organizations=this.values.filter(function(t){return+t.lat===i&&+t.lng===a}),this.city=this.organizations[0].city,this.country=this.organizations[0].country,this.map.fitBounds(e.getBounds())},selectOrganization:function(t){this.selected=t},close:function(){this.organizations=[],this.city=void 0,this.selected=void 0,this.group.setStyle(this.styles.global),this.map.setZoom(this.minZoom)},goBack:function(){this.selected&&(this.selected=void 0)}}},x=w,k=(n("5490"),Object(f["a"])(x,r,s,!1,null,null,null));k.options.__file="Map.vue";var j=k.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loader"},[n("div",{staticClass:"spinner",style:t.styles}),n("p",[t._v(t._s(t.message))])])},A=[],L={name:"Loader",props:{message:{type:String,default:"Cargando"},size:{type:Number,default:20},color:{type:String,default:"#501981"},borderWidth:{type:Number,default:5}},computed:{styles:function(){var t=this.size,e=this.color,n=this.borderWidth,i={};return i.borderWidth=n+"px",i.width=i.height=t+"px",i.borderTopColor=e,i}}},N=L,M=(n("5107"),Object(f["a"])(N,S,A,!1,null,"78961cbe",null));M.options.__file="Loader.vue";var Z=M.exports,P=(n("1c4c"),n("5df3"),n("4f7f"),n("96cf"),n("1da1")),T=n("bc3a"),B=n.n(T),D="https://script.googleusercontent.com/macros/echo?user_content_key=3OIATuhIOi_2RftB1L2crgi4JOhU0ODrAnMDL58rs-kd5hDQDuAfcoJPar7_8ZP6U49bCaWBhNkuwiiWurJDAYilP9AXyGRSm5_BxDlH2jW0nuo2oDemN9CCS2h10ox_1xSncGQajx_ryfhECjZEnASyiNeYGOHNuciMgVQXrNzTuUsYVsWfPF8YJXDSecLxsHfdb0rqHAQYWifPTNu7iNpytj_A4aoE&lib=MVw3vcBzpoRce2kAb8hp7l4zQbgHhzg3Z",E=function(){var t=Object(P["a"])(regeneratorRuntime.mark(function t(){var e,n,i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,B.a.get(D);case 2:return e=t.sent,n=e.data,i=n.data.filter(function(t){return t.lat}),a=i.map(function(t){var e=t.city,n=t.country,i=t.lat,a=t.lng;return[e,n,+i,+a]}),a=new Set(a.map(JSON.stringify)),a=Array.from(a).map(JSON.parse),t.abrupt("return",{points:a,values:i});case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),J={components:{Map:j,Loader:Z},name:"App",data:function(){return{points:[],values:[],loading:!0}},created:function(){var t=this;E().then(function(e){var n=e.points,i=e.values;t.points=n,t.values=i,t.loading=!1})}},W=J,q=(n("034f"),Object(f["a"])(W,a,o,!1,null,null,null));q.options.__file="App.vue";var $=q.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t($)}}).$mount("#app")},"64a9":function(t,e,n){},"86fe":function(t,e,n){"use strict";var i=n("a14a"),a=n.n(i);a.a},a14a:function(t,e,n){},b812:function(t,e,n){},bdf3:function(t,e,n){},d60d:function(t,e,n){},d9c4:function(t,e,n){"use strict";var i=n("b812"),a=n.n(i);a.a}});
//# sourceMappingURL=app.e1c32425.js.map